# microservices-unleashed 公庫資料庫解耦
## 問題背景

當一個公司擁有多個業務團隊，共同使用一個 Git 公用程式碼庫（monorepo），起初這種模式看起來很有效率
只要業務上沒有太多的個性化需求，多個開發團隊從同一個程式碼庫抓取並提交程式碼是可行的
但是隨著業務需求差異化，各團隊個性化調整導致會出現以下問題：

### 造成衝突
- 程式碼衝突頻繁： 設想情況，不同業務團隊都在修改公庫中相同或相關的檔案。當多個團隊同時抓取（pull）最新程式碼、進行開發並提交（push）回公庫時，由於程式碼變動的交叉，頻繁的合併衝突（merge conflicts）幾乎是不可避免的。

- 不穩定的部署： 由於程式碼被不同團隊同時修改，且這些修改可能互不兼容，導致公庫在部署時經常發生異常。一個團隊的改動可能會意外地影響另一個團隊的業務功能，使得系統變得極不穩定。

- 版本管理混亂： 隨著時間推移，很難追蹤哪些改動屬於哪個業務線。程式碼庫變得臃腫，充滿了可能只為單一業務服務但卻影響整體穩定性的程式碼。

- 團隊間協作困難： 為了避免衝突和異常，開發團隊需要花費大量的時間進行溝通和協調，而不是專注於開發本身。這會大大降低開發效率，並增加專案管理的複雜性。

## 解決方案
- 將各業務模組的資料邏輯逐步解耦
- 採取獨立資料庫或獨立 schema 模式
- 使用 CI/CD 管理資料表版本
- 提供穩定的共用資料同步方案
